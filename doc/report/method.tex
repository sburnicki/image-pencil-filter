\section{Method} \label{method}
The filter considers \textit{line scetching} and \textit{shading} separately.
The following subsections shed some light on how both stages work precisely.

The input for the filter is a regular RGB-image $I_{rgb}$. In the first step a
grayscale image $I_g$ is calculated using the $Y$-channel of the
$YUV$-transformed image $I_{iuv}$. $I_g$ now serves as input for the future
steps.

\subsection{Line Scetching}
One prominent task of the filter is to create sketchy looking outlines. The main
objective here is to mimic freehand sketching, which is typically done by
drawing short straight lines aligned to the outlines. The outlines are detected
using a simple gradient operator. Then each pixel is assigned to a line
direction and finally the pixel is drawn as part of its line.

\paragraph{Gradient Image}
The Outlines are detected and stored in the image $G$ using gradient magnitudes:
\begin{align*}
  G = ((\partial_x G)^2 + (\partial_y G)^2)^{\frac{1}{2}}
\end{align*}
TODO Bild verweis!!

To classify each pixel to a line direction it would be possible to just use
gradient directions, however those are typically noisy. Therefore a very stable
convolution based direction classification is used. 

\paragraph{Line Convolution Filter}
Given just the gradient magnitudes $G$ for each line direction $i \in
\lbrace 1,\cdots,N\rbrace$ where $N$ is the total number of lines, the convolution between
$G$ and each line segment $\mathscr{L}_i$ is calculated.
\begin{align*}
  G_i = \mathscr{L}_i * G
\end{align*}

The value $G_i(p)$ of pixel $p$ will be very big, if that pixel lies directly on
a line in $G$ (edge) and if $\mathscr{L}_i$ is following this line, such that only big
values are collected in the convolution. If the pixel doesn't lie on or close to
a line it can not gather high values and therefore stay dark. Pixels which lie
very close to edges can still gather some brightness if the
line segment $\mathscr{L}_i$ intersects the edge. This way lines in $G$ which
follow the direction of $\mathscr{L}_i$ show up and slightly overshoot in $G_i$.

Now to actually draw the lines, each pixel selects its maximum value from all
$G_i$:
\begin{align*}
 L = \max(\lbrace G_i\rbrace) \quad \forall i \in  \lbrace1,\cdots,N\rbrace
\end{align*}

TODO: Bilder einf√ºgen!

\subsection{Shading}
Raphael
\paragraph{Histogram Matching}
Raphael

\paragraph{Textureing}
Raphael
